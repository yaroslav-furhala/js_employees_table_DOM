{"version":3,"sources":["scripts/main.js"],"names":["lastChoise","activeRow","headRow","document","querySelector","tbody","flag","addEventListener","e","target","tagName","list","callback","querySelectorAll","i","children","indexOf","a","b","innerText","getSalary","localeCompare","innerHTML","sort","forEach","tr","append","row","slice","split","join","classList","remove","closest","add","insertAdjacentHTML","form","showNot","type","not","notification","notTitle","notDescript","setTimeout","validation","key","value","length","normalize","toLocaleString","preventDefault","formData","FormData","createElement","reset","targetI","cellIndex","oldValue","normValue","replace","targetInput","cloneNode","firstChild","replaceWith","focus","eventKey","blur","ev","name"],"mappings":"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","file":"main.8e3bea59.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst headRow = document.querySelector('thead tr');\nconst tbody = document.querySelector('tbody');\nlet lastChoise;\nlet flag = 1;\nlet activeRow;\n\n// ---- sorting ----\n\nheadRow.addEventListener('click', e => {\n  if (e.target.tagName !== 'TH') {\n    return;\n  }\n\n  const list = [...tbody.querySelectorAll('tr')];\n  const i = [...headRow.children].indexOf(e.target);\n  let callback;\n\n  switch (i) {\n    case 3:\n      callback = (a, b) => a.children[i].innerText - b.children[i].innerText;\n      break;\n\n    case 4:\n      callback = (a, b) => getSalary(a) - getSalary(b);\n      break;\n\n    default:\n      callback = (a, b) => {\n        return a.children[i].innerText.localeCompare(b.children[i].innerText);\n      };\n  }\n\n  function getSalary(row) {\n    return +row.children[i].innerText.slice(1).split(',').join('');\n  }\n\n  if (lastChoise === i) {\n    flag *= -1;\n  } else {\n    lastChoise = i;\n    flag = 1;\n  }\n\n  tbody.innerHTML = '';\n  list.sort((a, b) => callback(a, b) * flag).forEach(tr => tbody.append(tr));\n});\n\n// ---- focus ----\n\ntbody.addEventListener('click', e => {\n  if (activeRow) {\n    activeRow.classList.remove('active');\n  }\n\n  activeRow = e.target.closest('tr');\n  activeRow.classList.add('active');\n});\n\n// ---- form ----\n\ndocument.querySelector('table').insertAdjacentHTML('afterend', `\n  <form class=\"new-employee-form\">\n    <label>Name:\n      <input\n        name=\"name\"\n        type=\"text\"\n        data-qa=\"name\"\n      >\n    </label>\n    <label>Position:\n      <input\n        name=\"position\"\n        type=\"text\"\n        data-qa=\"position\"\n      >\n    </label>\n    <label>Office:\n      <select name=\"office\" data-qa=\"office\">\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n    <label>Age:\n      <input\n        name=\"age\"\n        type=\"number\"\n        data-qa=\"age\"\n      >\n    </label>\n    <label>Salary:\n      <input\n        name=\"salary\"\n        type=\"number\"\n        data-qa=\"salary\"\n      >\n    </label>\n    \n    <button type=\"submit\">Save to table</button>\n  </form>\n`);\n\nconst form = document.querySelector('.new-employee-form');\n\n// ---- showing notification ----\n\nfunction showNot(type, not) {\n  form.insertAdjacentHTML('afterend', `\n    <div class=\"notification\" data-qa=\"notification\">\n      <h1 class=\"title\"></h1>\n      <p></p>\n    </div>\n  `);\n\n  const notification = document.querySelector('.notification');\n  const notTitle = notification.querySelector('.title');\n  const notDescript = notification.querySelector('p');\n\n  switch (type) {\n    case 'error':\n      notification.classList.add('error');\n      notTitle.innerHTML = 'ERROR';\n      break;\n\n    case 'success':\n      notification.classList.add('success');\n      notTitle.innerHTML = 'SUCCESS';\n      break;\n\n    default:\n      return;\n  }\n\n  notDescript.innerHTML = not;\n\n  setTimeout(() => {\n    notification.remove();\n  }, 3000);\n}\n\n// ---- validation ----\n\nfunction validation(key, value) {\n  if (!value) {\n    showNot('error', 'All fields are required');\n\n    return false;\n  }\n\n  if (key === 'name' && value.length < 4) {\n    showNot('error', 'Name length should be at least 4 letters');\n\n    return false;\n  }\n\n  if (key === 'age' && (+value < 18 || +value > 90)) {\n    showNot('error', 'Age should be from 18 to 90');\n\n    return false;\n  }\n\n  return true;\n}\n\n// ---- normalization for salary ----\n\nfunction normalize(key, value) {\n  return key === 'salary'\n    ? `$${(+value).toLocaleString()}`\n    : value;\n}\n\n// ---- adding new employee ----\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const formData = new FormData(form);\n  const tr = document.createElement('tr');\n\n  for (const [key, value] of formData) {\n    if (!validation(key, value)) {\n      return;\n    }\n\n    tr.insertAdjacentHTML('beforeend', `\n      <td>${normalize(key, value)}</td>\n    `);\n  }\n\n  tbody.append(tr);\n  form.reset();\n  showNot('success', 'New employee is successfully added to the table');\n});\n\n// ---- editing cell ----\n\ntbody.addEventListener('dblclick', e => {\n  const target = e.target;\n  const targetI = target.cellIndex;\n  const oldValue = target.innerText;\n  const normValue = oldValue.replace(/[$,]/g, '');\n  const targetInput = form.querySelectorAll('[name]')[targetI].cloneNode(true);\n\n  targetInput.classList.add('cell-input');\n  targetInput.value = normValue;\n  target.firstChild.replaceWith(targetInput);\n  targetInput.focus();\n\n  targetInput.addEventListener('keypress', eventKey => {\n    if (eventKey.key === 'Enter') {\n      targetInput.blur();\n    }\n  });\n\n  targetInput.addEventListener('blur', ev => {\n    if (\n      !validation(targetInput.name, targetInput.value) || !targetInput.value\n    ) {\n      target.innerText = oldValue;\n\n      return;\n    }\n\n    target.innerText = normalize(targetInput.name, targetInput.value);\n  });\n});\n"]}